<!-- 首页 -->
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>首页</title>
    <link rel="stylesheet" href="./layui/css/layui.css">
    <link rel="stylesheet" href="./xznstatic/css/common.css"/>
    <link rel="stylesheet" href="./xznstatic/css/style.css"/>
</head>
<style type="text/css">
    html, body {
        height: 100%;
    }

    #iframe {
        width: 100%;
        margin-top: 0;
        padding-top: 70px;
    }

    #header {
        height: auto;
        background: #fff;
        border-bottom: 0;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        z-index: 1;
    }

    #header .nav-top {
        display: flex;
        align-items: center;
        padding: 0 20px;
        font-size: 16px;
        color: #2a8a15;
        box-sizing: border-box;
        height: 67px;
        background: #4d4f36;
        box-shadow: 0px 1px 0px 0px rgba(255, 255, 255, 1);
        justify-content: center;
        position: relative;
        z-index: 1;
    }

    #header .nav-top-img {
        width: 175px;
        height: 40px;
        padding: 0;
        margin: 0;
        border-radius: 6px;
        border-width: 0;
        border-style: solid;
        border-color: rgba(0, 0, 0, .3);
        box-shadow: 0 0 6px rgba(0, 0, 0, .3);
    }

    #header .nav-top-title {
        line-height: 40px;
        font-size: 30px;
        color: rgba(255, 255, 255, 1);
        padding: 0 10px;
        margin: 0 10px;
        border-radius: 6px;
        border-width: 0;
        border-style: solid;
        border-color: rgba(0, 0, 0, .3);
        background-color: rgba(0, 0, 0, 0);
        box-shadow: 0 0 0px rgba(0, 0, 0, .3);
    }

    #header .nav-top-tel {
        line-height: 40px;
        font-size: 16px;
        color: #333;
        padding: 0 10px;
        margin: 0;
        border-radius: 6px;
        border-width: 0;
        border-style: solid;
        border-color: rgba(0, 0, 0, .3);
        box-shadow: 0 0 6px rgba(0, 0, 0, .3);
    }

    #header .navs {
        display: flex;
        padding: 0 20px;
        align-items: center;
        box-sizing: border-box;
        height: 70px;
        background: #d42e3b;
        box-shadow: 0px -5px 0px 4px rgba(255, 255, 255, 1);
        justify-content: center;
    }

    #header .navs1 {
        width: 200px;
        height: 100vh;
        background: darkgoldenrod;
        position: absolute;
        top: 0;
        display: block;
        padding: 0;
        overflow-y: scroll;
        scrollbar-width: none;
        -ms-overflow-style: none;
    }

    #header .navs.navs1::-webkit-scrollbar {
        display: none;
    }

    #header .navs1 .list {
        display: flex;
        flex-direction: column;
    }

    #header .navs .title {
        width: auto;
        line-height: 40px;
        font-size: 16px;
        color: #333;
        padding: 0 10px;
        margin: 0 5px;
        border-radius: 6px;
        border-width: 0;
        border-style: solid;
        border-color: rgba(0, 0, 0, .3);
        background-color: rgba(0, 0, 0, 0);
        box-shadow: 0 0 6px rgba(0, 0, 0, 0);
    }

    #header .navs li {
        display: inline-block;
        width: auto;
        line-height: 70px;
        padding: 0 20px;
        margin: 0;
        color: rgba(255, 255, 255, 1);
        font-size: 16px;
        border-radius: 0;
        border-width: 0;
        border-style: solid;
        border-color: rgba(0, 0, 0, .3);
        background-color: rgba(247, 247, 247, 0);
        box-shadow: 0 0 0px rgba(0, 0, 0, .1);
        text-align: center;
        box-sizing: border-box;
        cursor: pointer;
    }

    #header .navs li a {
        color: inherit;
    }

    #header .navs li.current a {
        color: inherit;
    }

    #header .navs li a:hover {
        color: inherit;
    }

    #header .navs li.current {
        color: rgba(255, 255, 255, 1);
        font-size: 16px;
        border-radius: 0;
        border-width: 0;
        border-style: solid;
        border-color: rgba(0, 0, 0, .3);
        background-color: #bb3e03;
        box-shadow: 0 0 0px rgba(255, 0, 0, .8);
    }

    #header .navs li:hover {
        color: rgba(255, 255, 255, 1);
        font-size: 16px;
        border-radius: 0;
        border-width: 0;
        border-style: solid;
        border-color: rgba(0, 0, 0, .3);
        background-color: #bb3e03;
        box-shadow: 0 0 0px rgba(0, 0, 0, .3);
    }
</style>
<body>
<!-- start 顶部导航栏 -->
<div id="header">
    <div v-if='false' class="nav-top">
        <div v-if="true" class="nav-top-title">{{projectName}}</div>
        <div class="nav-top-tel"></div>
    </div>
    <div class="navs">
        <div class="logo"
             style="font-size: 20px;top: 32px;color: #fff;font-weight: bold;margin-left: -200px;width: 240px;"
        ><img v-if='true' class="nav-top-img"
              src='https://www.yctu.edu.cn/_upload/tpl/07/e5/2021/template2021/myimages/logo.png'>
        </div>
        <div class="title" v-if="false" v-text="projectName"></div>
        <div class="list">
            <ul>
                <li class='current'><a href="javascript:navPage('./pages/home/home.html')" class="menumain"><i
                        v-if="false" class="layui-icon layui-icon-home"></i>首页</a></li>
                <li v-for="(item,index) in indexNav" v-bind:key="index"><a
                        :href="'javascript:navPage(\''+item.url+'\')'" class="menumain" style="cursor: pointer;"><i
                        v-if="false" class="layui-icon" :class="iconArr[index]"></i>{{item.name}}</a></li>
                <li><a href="javascript:centerPage();" class="menumain"><i v-if="false"
                                                                           class="layui-icon layui-icon-username"></i>个人中心</a>
                </li>
                <li><a :href="adminurl" target="_blank" class="menumain" style="cursor: pointer;"><i v-if="false"
                                                                                                     class="layui-icon layui-icon-link"></i>后台管理</a>
                </li>
            </ul>
        </div>
    </div>
</div>
<!-- end 顶部导航栏 -->

<iframe src="./pages/home/home.html" id="iframe" frameborder="0" scrolling="no" width="100%"
        onload="changeFrameHeight"></iframe>

<div id="tabbar" v-if="true" class="tabbar"
     :style='{"padding":"20px 0","boxShadow":"0 0 6px rgba(255,0,0,.8)","margin":"10px 0 0 0","borderColor":"rgba(0,0,0,.3)","backgroundColor":"#382e2f","borderRadius":"0","borderWidth":"0","borderStyle":"solid"}'
     style="position: relative;">
<!--    <img v-if='false'-->
<!--         :style='{"boxShadow":"0 0 6px rgba(255,0,0,.8)","margin":"0 auto","borderColor":"rgba(0,0,0,.3)","borderRadius":"100%","borderWidth":"1px","width":"44px","borderStyle":"solid","height":"44px"}'-->
<!--         style='display: block;' src='http://codegen.caihongy.cn/20201024/ed5e326ca66f403aa3197b5fbb4ec733.jpg'/>-->
<!--    <div :style='{"padding":"0 10px","margin":"10px auto","textAlign":"center","borderRadius":"0","borderWidth":"0","width":"100%","lineHeight":"32px","fontSize":"14px","borderStyle":"solid"}'-->
<!--         style="color: white" class="company">© 2022-2022 盐城师范学院-->
<!--    </div>-->
<!--    <div v-if="false" :style='{"padding":"0 10px","margin":"10px auto","textAlign":"center","borderRadius":"0","borderWidth":"0","width":"100%","lineHeight":"32px","fontSize":"14px","borderStyle":"solid"}'-->
<!--         style="color: white" class="record">苏ICP备13031xxx号-->
<!--    </div>-->
<!--    <div :style='{"padding":"0 10px","margin":"10px auto 30px auto","textAlign":"center","borderRadius":"0","borderWidth":"0","width":"40%","fontSize":"14px","borderStyle":"solid"}'-->
<!--         style="color: white" class="desc">电话：4008000000 | 邮箱：support@21epub.com-->
<!--    </div>-->
    <div class="row row-30 justify-content-center" style="margin: 25px 0; display: flex; justify-content: center">
        <div class="footer-left" style="display: block;">
            <img src="https://www.yctu.edu.cn/_upload/tpl/07/e5/2021/template2021/myimages/codeimg.png"
            style="width: 133px;float: right;margin-right: 30px;height: auto">
        </div>
        <div class="footer-right" style="display: block;">
            <div class="copyright" style="color: white;">Copyright © 盐城师范学院 All Rights Reserved. 美工设计：罗杰　　网站制作：罗杰　　<a href="mailto:zhujk@yctu.edu.cn" style="color: white;"><i>问题反馈</i></a><br>
                地址：(通榆校区)江苏省盐城市开放大道50号　邮编：224002　 (新长校区)江苏省盐城市希望大道南路2号　邮编：224007<br>
                TEL：(00)86-515-88233012　FAX：(00)86-515-88258011　备案：<a href="http://beian.miit.gov.cn/" style="color: white;">苏ICP备05003187号-1　苏ICP备05003187号-2</a><br>
            </div>
<!--            <div class="copyright2">Copyright © 盐城师范学院 All Rights Reserved. <br>-->
<!--                地址：(通榆校区)江苏省盐城市开放大道50号<br>-->
<!--                　　　邮编：224002<br>-->
<!--                　　　(新长校区)江苏省盐城市希望大道南路2号<br>-->
<!--                　　　邮编：224007<br>-->
<!--                TEL：(00)86-515-88233012<br>-->
<!--                　　　FAX：(00)86-515-88258011<br>-->
<!--                备案：<a href="http://beian.miit.gov.cn/">苏ICP备05003187号-1　苏ICP备05003187号-2</a><br>-->
<!--                美工设计：美术学院　　网站制作：信息中心·网络科　　<a href="mailto:zhujk@yctu.edu.cn">问题反馈</a>-->
<!--            </div>-->
        </div>
    </div>
</div>

<script src="./xznstatic/js/jquery-1.11.3.min.js"></script>
<script src="./layui/layui.js"></script>
<script src="./js/vue.js"></script>
<script src="./js/config.js"></script>

<script>
    var vue1 = new Vue({el: '#tabbar'})

    var vue = new Vue({
        el: '#header',
        data: {
            iconArr: ['layui-icon-gift', 'layui-icon-email', 'layui-icon-logout', 'layui-icon-transfer', 'layui-icon-slider', 'layui-icon-print', 'layui-icon-cols', 'layui-icon-snowflake', 'layui-icon-note', 'layui-icon-flag', 'layui-icon-theme', 'layui-icon-website', 'layui-icon-console', 'layui-icon-face-surprised', 'layui-icon-template-1', 'layui-icon-app', 'layui-icon-read', 'layui-icon-component', 'layui-icon-file-b', 'layui-icon-unlink', 'layui-icon-tabs', 'layui-icon-form', 'layui-icon-chat'],
            indexNav: indexNav,
            cartFlag: cartFlag,
            adminurl: adminurl,
            chatFlag: chatFlag,
            projectName: projectName,
        },
        mounted: function () {
            this.bindClickOnLi();
        },
        created() {
            this.iconArr.sort(() => {
                return (0.5 - Math.random())
            })
        },
        methods: {
            jump(url) {
                jump(url)
            },
            bindClickOnLi() {
                let list = document.getElementsByTagName("li");
                for (var i = 0; i < list.length; i++) {
                    list[i].onclick = function () {
                        $(this).addClass("current").siblings().removeClass("current");
                    }
                }
            }
        }
    });

    layui.use(['element', 'layer'], function () {
        var element = layui.element;
        var layer = layui.layer;
    });

    function chatTap() {
        var userTable = localStorage.getItem('userTable');
        if (userTable) {
            layui.layer.open({
                type: 2,
                title: '客服',
                area: ['600px', '600px'],
                content: './pages/chat/chat.html'
            });
        } else {
            window.location.href = './pages/login/login.html'
        }
    }

    // 导航栏跳转
    function navPage(url) {
        localStorage.setItem('iframeUrl', url);
        document.getElementById('iframe').src = url;
    }

    // 跳转到个人中心
    function centerPage() {
        var userTable = localStorage.getItem('userTable');
        if (userTable) {
            localStorage.setItem('iframeUrl', './pages/' + userTable + '/center.html');
            document.getElementById('iframe').src = './pages/' + userTable + '/center.html';
        } else {
            window.location.href = './pages/login/login.html'
        }
    }

    var iframeUrl = localStorage.getItem('iframeUrl');
    document.getElementById('iframe').src = iframeUrl || './pages/home/home.html';

    // var i = 0;
    setInterval(function () {
        // i++;
        // if(i<50) changeFrameHeight();
        changeFrameHeight();
    }, 200)

    function changeFrameHeight() {
        var iframe = document.getElementById('iframe');
        // iframe.height = 'auto';
        if (iframe) {
            var iframeWin = iframe.contentWindow || iframe.contentDocument.parentWindow;
            // console.log(iframe.contentWindow);
            // console.log(iframe.contentDocument);
            // console.log(iframe.contentDocument.parentWindow);
            if (iframeWin.document.body) {
                // console.log(iframeWin.document.body);
                iframe.height = iframeWin.document.body.scrollHeight;
            }
        }
    };

    //  窗口变化时候iframe自适应
    // function changeFrameHeight() {
    // var header = document.getElementById('header').scrollHeight;
    //     let isshow = false
    //     var tabbar = 0
    //     if(isshow) {
    //       tabbar = document.getElementById('tabbar').scrollHeight
    //     }
    // var ifm = document.getElementById("iframe");
    // ifm.height = document.documentElement.clientHeight - header - tabbar;
    // ifm.width = document.documentElement.clientWidth;
    // }

    // reasize 事件 窗口大小变化后执行的方法
    window.onresize = function () {
        changeFrameHeight();
    }
</script>
</body>
</html>
